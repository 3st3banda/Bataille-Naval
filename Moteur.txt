import pygame
import random

# Initialisation de Pygame
pygame.init()

# Constantes
SCREEN_WIDTH = 800
SCREEN_HEIGHT = 600
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
BLUE = (0, 0, 255)
GREEN = (0, 255, 0)
RED = (255, 0, 0)

# Création de la fenêtre
screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
pygame.display.set_caption("Bataille Navale")

# Initialisation du plateau de jeu
board = []
for x in range(10):
    board.append(["O"] * 10)

# Fonction pour afficher le plateau de jeu
def print_board(board, font):
    for i, row in enumerate(board):
        for j, cell in enumerate(row):
            if cell == "O":
                color = WHITE
            elif cell == "S":
                color = GREEN
            elif cell == "X":
                color = RED
            text = font.render(cell, True, BLACK)
            screen.blit(text, (j * 50 + 30, i * 50 + 50))

# Fonction pour placer les bateaux aléatoirement
def place_ships(board):
    for i in range(5):
        while True:
            ship_row = random.randint(0, len(board) - 1)
            ship_col = random.randint(0, len(board[0]) - 1)
            if board[ship_row][ship_col] == "O":
                board[ship_row][ship_col] = "S"
                break

# Fonction pour afficher un message sur l'écran
def draw_text(text, font, color, x, y):
    surface = font.render(text, True, color)
    rect = surface.get_rect()
    rect.center = (x, y)
    screen.blit(surface, rect)

# Fonction pour jouer une partie
def play_game():
    font = pygame.font.Font(None, 50)
    place_ships(board)
    running = True
    turns = 0
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
            if event.type == pygame.MOUSEBUTTONDOWN:
                pos = pygame.mouse.get_pos()
                guess_row = pos[1] // 50 - 1
                guess_col = pos[0] // 50 - 1
                if board[guess_row][guess_col] == "S":
                    board[guess_row][guess_col] = "X"
                    draw_text("Congratulations! You sunk my battleship!", font, BLUE, SCREEN_WIDTH // 2, 30)
                    running = False
                else:
                    if guess_row not in range(10) or guess_col not in range(10):
                        draw_text("Oops, that's not even in the ocean.", font, BLUE, SCREEN_WIDTH // 2, 30)
                    elif board[guess_row][guess_col] == "X":
                        draw_text("You guessed that one already.", font, BLUE, SCREEN_WIDTH // 2, 30)
                    else:
                        draw_text("You missed my battleship!", font, BLUE, SCREEN_WIDTH // 2, 30)
                        board[guess_row][guess_col] = "X"
                    turns += 1
                    if turns == 20:
                        draw_text("Game Over", font, BLUE, SCREEN_WIDTH // 2, 30)
